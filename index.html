<!DOCTYPE html>
<html>

<head>
    <title> Rock Paper Scissors! </title>
</head>

<body>
    <script>
        // Since the variable is decalred and a value is assigned before even running game(),
        // There is constant value for computerMove, and therefore the same moves by the computer everytime
        // This should be fixed by declaring computerMove inside of game(), then it would be run after every loop
        // let computerMove = computerPlay();
        let playerScore = 0;
        let computerScore = 0;
        let gameStatus;


        function computerPlay() {
            // Create a function that will return a string with rock, paper,
            // or scissors. 
            // It should take an argument of string, namely one of rock, paper,
            // or scissors. 
            // The random functionality could use Random from math class, and
            // using a range from 0-33, 34-67, 68-100, with corresponding strings
            let randomNumber = Math.floor((Math.random() * 100));
            // Math.random returns a random number between 0-1
            // We use Math.floor() to return integers
            // We now will return a random number between 0 and 100
            // Number generated correctly
            // console.log(randomNumber);
            switch (true) {
                case randomNumber <= 33 && randomNumber >= 0:
                    return 'paper';
                    break;
                case randomNumber <= 67 && randomNumber >= 34:
                    return 'rock';
                    break;
                case randomNumber <= 100 && randomNumber >= 68:
                    return 'scissors';
                    break;
            }
        }

        function rockPaperScissors(playerSelection, computerSelection) {
            // Purpose of this function is to play a game of rock paper scissors
            // This function will compare the playerSelection string with computerSelection string
            // Rock beats scissors, loses to paper, ties to rock
            // Scissors beats paper, loses to rock, ties to scissors
            // Paper beats rock, loses to scissors, ties to paper
            // When two strings are equivalent, tie (3 cases)
            // When Rock with scissors, rock wins (This doubles as Scissors loses to Rock) (2 cases)
            // Rock with paper, paper wins (2 cases)
            // Scissors with paper, scissors wins (2 cases)


            switch (true) {
                // Each case should return a string for the purpose of playing 5 games in a row
                // Case tie
                case playerSelection.toLowerCase() === computerSelection:
                    console.log('It\'s a tie');
                    break;
                // Case Rock to Paper
                // Case Paper to Rock
                case playerSelection.toLowerCase() === 'rock':
                    if (computerSelection === 'paper') {
                        console.log('You lose! ' + computerSelection + ' beats ' + playerSelection.toLowerCase());
                        gameStatus = 'lose';
                    } else if (computerSelection === 'scissors') {
                        gameStatus = 'win';
                        console.log('You win! ' + playerSelection.toLowerCase() + ' beats ' + computerSelection);
                    }
                    break;
                // Case Scissors to Rock
                // Case Rock to Scissors
                case playerSelection.toLowerCase() === 'scissors':
                    if (computerSelection === 'rock') {
                        console.log('You lose! ' + computerSelection + ' beats ' + playerSelection.toLowerCase());
                        gameStatus = 'lose';
                    } else if (computerSelection === 'paper') {
                        console.log('You win! ' + playerSelection.toLowerCase() + ' beats ' + computerSelection);
                        gameStatus = 'win';
                    }
                    break;

                // Case Paper to Scissors
                // case Scissors to Paper
                case playerSelection.toLowerCase() === 'paper':
                    if (computerSelection === 'scissors') {
                        console.log('You lose! ' + computerSelection + ' beats ' + playerSelection.toLowerCase());
                        gameStatus = 'lose';
                    } else if (computerSelection === 'rock') {
                        console.log('You win! ' + playerSelection.toLowerCase() + ' beats ' + computerSelection);
                        gameStatus = 'win';
                    }
                    break;
            }
        }
        function game() {
            // This function will play 5 games of rock paper scissors using previous function
            // It will also keep score: a win is 1 pt, a loss is 0 pt, and a tie is 0 pt
            // Score will be kept by whether the string returned from rockPaperScissors function contains
            // a 'win', a 'lose'

            // I think the call on function rockPaperScissors returns a constant one value
            // so here it's playing the same game 5 times, instead of 5 different games

            // It seems like the computer is not making random decisions but decisions based on my 
            // move? This isn't true (I think)
            // It's like it remembers the move that I make and it replicates its answer for that?

            for (let i = 0; i < 5; i++) {
                let playerMove = prompt('pick one of scissors, rock, paper');
                let computerMove = computerPlay();
                rockPaperScissors(playerMove, computerMove);
                if (gameStatus === 'win') {
                    playerScore++;
                    console.log(playerScore);
                } else if (gameStatus === 'lose') {
                    computerScore++;
                    console.log(computerScore);
                }
            }
            if (playerScore > computerScore) {
                console.log('Player wins! Final score  ' + 'player : ' + playerScore + ' : ' + 'computer : ' + computerScore);
            } else if (playerScore < computerScore) {
                console.log('Computer wins! Final score  ' + 'player : ' + playerScore + ' : ' + 'computer : ' + computerScore);
            } else {
                console.log('It\'s a tie! Final score ' + 'player : ' + playerScore + ' : ' + 'computer : ' + computerScore);
            }
        }
        game();

    </script>
</body>

</html>